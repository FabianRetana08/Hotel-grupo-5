CREATE TABLE FIDE_ESTADO_TB(
    ID_ESTADO NUMBER CONSTRAINT FIDE_ESTADO_ID_PK PRIMARY KEY,
    ESTADO VARCHAR2(50),
    DESCRIPCION_ESTADO VARCHAR2(500)    
);
/

CREATE TABLE FIDE_TIPO_CLIENTE_TB(
    ID_TIPO_CLIENTE NUMBER CONSTRAINT FIDE_TIPO_CLIENTE_ID_PK PRIMARY KEY,
    DESCRIPCION VARCHAR2(300),    
    ID_ESTADO NUMBER,
        CONSTRAINT FIDE_TIPO_CLIENTE_ESTADO_FK FOREIGN KEY (ID_ESTADO) REFERENCES FIDE_ESTADO_TB (ID_ESTADO)
);
/
---Revisar
CREATE TABLE FIDE_CLIENTE_TB (
    ID_CLIENTE NUMBER CONSTRAINT FIDE_CLIENTE_ID_PK PRIMARY KEY,
    NOMBRE_CLIENTE VARCHAR2(50),
    PRIMER_APELLIDO VARCHAR2(50),
    SEGUNDO_APELLIDO VARCHAR2(50),
    EMAIL VARCHAR2(250),
    NUM_TELEFONO NUMBER(15),
    ID_TIPO_CLIENTE NUMBER,
        CONSTRAINT FIDE_CLIENTE_TIPO_CLIENTE_FK FOREIGN KEY (ID_TIPO_CLIENTE) REFERENCES FIDE_TIPO_CLIENTE_TB (ID_TIPO_CLIENTE),
    ID_ESTADO NUMBER, 
        CONSTRAINT FIDE_CLIENTE_ESTADO_FK FOREIGN KEY (ID_ESTADO) REFERENCES FIDE_ESTADO_TB (ID_ESTADO)
);

/

CREATE TABLE FIDE_PUESTO_TRABAJO_TB(
    ID_PUESTO_TRABAJO NUMBER CONSTRAINT FIDE_PUESTO_TRABAJO_ID_PK PRIMARY KEY,
    NOMBRE VARCHAR2(50),
    DESCRIPCION VARCHAR2(300),
    SALARIO NUMBER(10,2),
    ID_ESTADO NUMBER,
        CONSTRAINT FIDE_PUESTO_TRABAJO_ESTADO_FK FOREIGN KEY (ID_ESTADO) REFERENCES FIDE_ESTADO_TB (ID_ESTADO)
);
/

--PROVINCIA
CREATE TABLE FIDE_PROVINCIA_TB (
    ID_PROVINCIA  NUMBER CONSTRAINT FIDE_PROVINCIA_ID_PK PRIMARY KEY,
    NOMBRE_PROVINCIA VARCHAR2(50 BYTE),
    ID_ESTADO NUMBER,
    CONSTRAINT FIDE_PROVINCIA_ESTADO_FK FOREIGN KEY (ID_ESTADO) REFERENCES FIDE_ESTADO_TB(ID_ESTADO)
);
/

--CANTON
CREATE TABLE FIDE_CANTON_TB (
    ID_CANTON    NUMBER CONSTRAINT FIDE_CANTON_ID_PK PRIMARY KEY,
    NOMBRE_CANTON VARCHAR2(50 BYTE),    
    ID_ESTADO NUMBER,
    CONSTRAINT FIDE_CANTON_ESTADO_FK FOREIGN KEY (ID_ESTADO) REFERENCES FIDE_ESTADO_TB(ID_ESTADO)
);
/

--DISTRITO
CREATE TABLE FIDE_DISTRITO_TB (
    ID_DISTRITO  NUMBER CONSTRAINT FIDE_DISTRITO_ID_PK PRIMARY KEY,
    NOMBRE_DISTRITO VARCHAR2(255),
    ID_ESTADO NUMBER,
    CONSTRAINT FIDE_DISTRITO_ESTADO_FK FOREIGN KEY (ID_ESTADO) REFERENCES FIDE_ESTADO_TB(ID_ESTADO)
);
/

--SUCURSAL
CREATE TABLE FIDE_SUCURSAL_TB (
    ID_SUCURSAL  NUMBER CONSTRAINT FIDE_SUCURSAL_ID_PK PRIMARY KEY,
    TELEFONO     NUMBER,
    EMAIL        VARCHAR2(250 BYTE),
    ID_ESTADO    NUMBER,
    CONSTRAINT FIDE_SUCURSAL_ESTADO_FK FOREIGN KEY (ID_ESTADO) REFERENCES FIDE_ESTADO_TB(ID_ESTADO)
);
/

--DIRECCION
CREATE TABLE FIDE_DIRECCION_TB (
    ID_SUCURSAL NUMBER,
    CONSTRAINT FIDE_DIRECCION_SUCURSAL_FK FOREIGN KEY (ID_SUCURSAL) REFERENCES FIDE_SUCURSAL_TB (ID_SUCURSAL),
    DETALLE_DIRECCION VARCHAR2(50),
    ID_DISTRITO NUMBER,
    CONSTRAINT FIDE_DIRECCION_DISTRITO_FK FOREIGN KEY (ID_DISTRITO) REFERENCES FIDE_DISTRITO_TB(ID_DISTRITO),
    ID_CANTON NUMBER,
    CONSTRAINT FIDE_DIRECCION_CANTON_FK FOREIGN KEY (ID_CANTON) REFERENCES FIDE_CANTON_TB (ID_CANTON),
    ID_PROVINCIA NUMBER,
    CONSTRAINT FIDE_DIRECCION_PROVINCIA_FK FOREIGN KEY (ID_PROVINCIA) REFERENCES FIDE_PROVINCIA_TB (ID_PROVINCIA),
    ID_ESTADO NUMBER,
    CONSTRAINT FIDE_DIRECCION_ESTADO_FK FOREIGN KEY (ID_ESTADO) REFERENCES FIDE_ESTADO_TB(ID_ESTADO),
    CONSTRAINT FIDE_DIRECCION_PK PRIMARY KEY (ID_DISTRITO, ID_CANTON, ID_PROVINCIA)
);
/

CREATE TABLE FIDE_AREA_TRABAJO_TB(
    ID_AREA_TRABAJO NUMBER CONSTRAINT FIDE_AREA_TRABAJO_ID_PK PRIMARY KEY,
    NOMBRE VARCHAR2(50),
    DESCRIPCION VARCHAR2(300),
    ID_ESTADO NUMBER,
        CONSTRAINT FIDE_AREA_TRABAJO_ESTADO_FK FOREIGN KEY (ID_ESTADO) REFERENCES FIDE_ESTADO_TB (ID_ESTADO)
);
/
--


CREATE TABLE FIDE_EMPLEADO_TB(
    ID_EMPLEADO NUMBER CONSTRAINT FIDE_EMPLEADO_ID_PK PRIMARY KEY,
    NOMBRE_EMPLEADO VARCHAR2(50),
    PRIMER_APELLIDO VARCHAR2(50),
    SEGUNDO_APELLIDO VARCHAR2(50),
    EMAIL VARCHAR2(250),
    NUM_TELEFONO NUMBER(15),
    ID_PUESTO_TRABAJO NUMBER,
        CONSTRAINT FIDE_EMPLEADO_PUESTO_TRABAJO_FK FOREIGN KEY (ID_PUESTO_TRABAJO) REFERENCES FIDE_PUESTO_TRABAJO_TB (ID_PUESTO_TRABAJO),
    ID_AREA_TRABAJO NUMBER,
        CONSTRAINT FIDE_EMPLEADO_AREA_TRABAJO_FK FOREIGN KEY (ID_AREA_TRABAJO) REFERENCES FIDE_AREA_TRABAJO_TB (ID_AREA_TRABAJO),
    ID_SUCURSAL NUMBER,
        CONSTRAINT FIDE_EMPLEADO_SUCURSAL_FK FOREIGN KEY (ID_SUCURSAL) REFERENCES FIDE_SUCURSAL_TB (ID_SUCURSAL),
    ID_ESTADO NUMBER,
        CONSTRAINT FIDE_EMPELADO_ESTADO_FK FOREIGN KEY (ID_ESTADO) REFERENCES FIDE_ESTADO_TB (ID_ESTADO)
);
/

CREATE TABLE FIDE_CATEGORIA_PRODUCTO_TB(
    ID_CATEGORIA NUMBER CONSTRAINT FIDE_CATEGORIA_PRODUCTO_ID_PK PRIMARY KEY,
    NOMBRE VARCHAR2(50),
    DESCRIPCION VARCHAR2(300),
    ID_ESTADO NUMBER,
        CONSTRAINT FIDE_CATEGORIA_PRODUCTO_ESTADO_FK FOREIGN KEY (ID_ESTADO) REFERENCES FIDE_ESTADO_TB (ID_ESTADO)
);
/

CREATE TABLE FIDE_PRODUCTO_TB(
    ID_PRODUCTO NUMBER CONSTRAINT FIDE_PRODUCTO_ID_PK PRIMARY KEY,
    NOMBRE VARCHAR2(50),
    DESCRIPCION VARCHAR2(300),
    ID_CATEGORIA NUMBER,
        CONSTRAINT FIDE_PRODUCTO_CATEGORIA_FK FOREIGN KEY (ID_CATEGORIA) REFERENCES FIDE_CATEGORIA_PRODUCTO_TB (ID_CATEGORIA),
    ID_SUCURSAL NUMBER,
        CONSTRAINT FIDE_PRODUCTO_SUCURSAL_FK FOREIGN KEY (ID_SUCURSAL) REFERENCES FIDE_SUCURSAL_TB (ID_SUCURSAL),
    ID_ESTADO NUMBER,
        CONSTRAINT FIDE_PRODUCTO_ESTADO_FK FOREIGN KEY (ID_ESTADO) REFERENCES FIDE_ESTADO_TB (ID_ESTADO)
);
/

CREATE TABLE FIDE_TIPO_RESERVA_TB (
    ID_TIPO_RESERVA NUMBER CONSTRAINT FIDE_TIPO_RESERVA_ID_PK PRIMARY KEY,
    NOMBRE VARCHAR2(50),
    DESCRIPCION VARCHAR2(300),
    ID_ESTADO NUMBER,
    CONSTRAINT FIDE_TIPO_RESERVA_ESTADO_FK FOREIGN KEY (ID_ESTADO)
        REFERENCES FIDE_ESTADO_TB(ID_ESTADO)
);


/

--TIPO HABITACION
CREATE TABLE FIDE_TIPO_HABITACION_TB (
    ID_TIPO_HABITACION NUMBER CONSTRAINT FIDE_TIPO_HABITACION_ID_PK PRIMARY KEY,
    DESCRIPCION  VARCHAR2(300),
    PRECIO  NUMBER(10,2),
    ID_ESTADO NUMBER,
    CONSTRAINT FIDE_TIPO_HABITACION_ESTADO_FK FOREIGN KEY (ID_ESTADO) REFERENCES FIDE_ESTADO_TB(ID_ESTADO)
); 
/

--HABITACION
CREATE TABLE FIDE_HABITACION_TB (
    ID_HABITACION VARCHAR2(50) CONSTRAINT FIDE_HABITACION_ID_PK PRIMARY KEY,
    ID_TIPO_HABITACION NUMBER,
    CONSTRAINT FIDE_HABITACION_TIPO_HABITANTION_FK FOREIGN KEY (ID_TIPO_HABITACION) REFERENCES FIDE_TIPO_HABITACION_TB(ID_TIPO_HABITACION),
    ID_SUCURSAL NUMBER,
    CONSTRAINT FIDE_HABITACION_SUCURSAL_FK FOREIGN KEY (ID_SUCURSAL) REFERENCES FIDE_SUCURSAL_TB(ID_SUCURSAL),
    ID_ESTADO  NUMBER,
    CONSTRAINT FIDE_HABITACION_ESTADO_FK FOREIGN KEY (ID_ESTADO) REFERENCES FIDE_ESTADO_TB(ID_ESTADO)
);
/

CREATE TABLE FIDE_RESERVA_TB(
    NUM_RESERVA NUMBER,
    ID_CLIENTE NUMBER,
        CONSTRAINT FIDE_RESERVA_CLIENTE_FK FOREIGN KEY (ID_CLIENTE) REFERENCES FIDE_CLIENTE_TB (ID_CLIENTE),
    ID_HABITACION VARCHAR2(50),
        CONSTRAINT FIDE_RESERVA_HABITACION_FK FOREIGN KEY (ID_HABITACION) REFERENCES FIDE_HABITACION_TB (ID_HABITACION),
    FECHA_RESERVADO DATE,
    ID_TIPO_RESERVA NUMBER,
        CONSTRAINT FIDE_RESERVA_TIPO_RESERVA_FK FOREIGN KEY (ID_TIPO_RESERVA) REFERENCES FIDE_TIPO_RESERVA_TB (ID_TIPO_RESERVA),
    ID_ESTADO NUMBER,
        CONSTRAINT FIDE_RESERVA_ESTADO_FK FOREIGN KEY (ID_ESTADO) REFERENCES FIDE_ESTADO_TB (ID_ESTADO),
        CONSTRAINT FIDE_RESERVA_PK PRIMARY KEY (NUM_RESERVA, ID_CLIENTE, ID_HABITACION)
);
/

--DETALLE FACTURA
CREATE TABLE FIDE_FACTURA_TB(
    NUM_FACTURA VARCHAR2(50),
    ID_CLIENTE NUMBER,
    ID_EMPLEADO NUMBER,
    NUM_DETALLE_FACTURA VARCHAR2(50),
    NUM_RESERVA NUMBER,
    ID_HABITACION VARCHAR2(50),
    TOTAL NUMBER(10,2),
    ID_ESTADO NUMBER,    

    CONSTRAINT FIDE_FACTURA_CLIENTE_FK 
        FOREIGN KEY (ID_CLIENTE) REFERENCES FIDE_CLIENTE_TB (ID_CLIENTE),

    CONSTRAINT FIDE_FACTURA_EMPLEADO_FK 
        FOREIGN KEY (ID_EMPLEADO) REFERENCES FIDE_EMPLEADO_TB (ID_EMPLEADO),

    CONSTRAINT FIDE_FACTURA_ESTADO_FK 
        FOREIGN KEY (ID_ESTADO) REFERENCES FIDE_ESTADO_TB (ID_ESTADO),

    CONSTRAINT FIDE_FACTURA_DETALLE_FACTURA_FK 
        FOREIGN KEY (NUM_DETALLE_FACTURA, NUM_RESERVA, ID_CLIENTE, ID_HABITACION)
        REFERENCES FIDE_DETALLE_FACTURA_TB (NUM_DETALLE_FACTURA, NUM_RESERVA, ID_CLIENTE, ID_HABITACION),

    CONSTRAINT FIDE_FACTURA_PK 
        PRIMARY KEY (NUM_FACTURA, ID_CLIENTE, ID_EMPLEADO, NUM_DETALLE_FACTURA)
);



/

CREATE TABLE FIDE_DETALLE_FACTURA_TB (
    NUM_DETALLE_FACTURA VARCHAR2(50),    
    NUM_RESERVA NUMBER,
    ID_CLIENTE NUMBER,
    ID_HABITACION VARCHAR2(50),
    ID_ESTADO NUMBER,
        CONSTRAINT FIDE_DETALLE_FACTURA_ESTADO_FK FOREIGN KEY (ID_ESTADO) REFERENCES FIDE_ESTADO_TB(ID_ESTADO),
        CONSTRAINT FIDE_DETALLE_FACTURA_RESERVA_FK FOREIGN KEY (NUM_RESERVA, ID_CLIENTE, ID_HABITACION) 
            REFERENCES FIDE_RESERVA_TB (NUM_RESERVA, ID_CLIENTE, ID_HABITACION),
        CONSTRAINT FIDE_DETALLE_FACTURA_PK PRIMARY KEY (NUM_DETALLE_FACTURA, NUM_RESERVA, ID_CLIENTE, ID_HABITACION)
        --RESERVA (NUM_RESERVA, ID_CLIENTE, ID_HABITACION)
);
/

--DETALLE SERVICIO A LA HABITACION 
CREATE TABLE FIDE_DETALLE_SERVICIO_HABITACION_TB ( 
    NUM_DETALLE_SERVICIO VARCHAR2(50) CONSTRAINT FIDE_DETALLE_SERVICIO_ID_PK PRIMARY KEY,
    DESCRIPCION VARCHAR2(300 BYTE),
    PRECIO NUMBER(10,2),
    ID_ESTADO NUMBER,
    CONSTRAINT FIDE_DETALLE_SERVICIO_ESTADO_FK FOREIGN KEY (ID_ESTADO) REFERENCES FIDE_ESTADO_TB(ID_ESTADO)
);

/

--SERVICIO A LA HABITACION 
CREATE TABLE FIDE_SERVICIO_HABITACION_TB (
    NUM_SERVICIO_HABITACION VARCHAR2(50),
    ID_CLIENTE NUMBER,
    CONSTRAINT FIDE_SERVICIO_HABITACION_CLIENTE_FK FOREIGN KEY (ID_CLIENTE) REFERENCES FIDE_CLIENTE_TB(ID_CLIENTE),
    ID_HABITACION VARCHAR2(50),
    CONSTRAINT FIDE_SERVICIO_HABITACION_HABITACION_FK FOREIGN KEY (ID_HABITACION) REFERENCES FIDE_HABITACION_TB(ID_HABITACION),
    NUM_DETALLE_SERVICIO VARCHAR2(50),
    CONSTRAINT FIDE_SERVICIO_HABITACION_DETALLE_SERVICIO_FK FOREIGN KEY (NUM_DETALLE_SERVICIO) REFERENCES FIDE_DETALLE_SERVICIO_HABITACION_TB(NUM_DETALLE_SERVICIO),
    ID_ESTADO NUMBER,
    CONSTRAINT FIDE_SERVICIO_HABITACION_ESTADO_FK FOREIGN KEY (ID_ESTADO) REFERENCES FIDE_ESTADO_TB(ID_ESTADO),
    CONSTRAINT FIDE_SERVICIO_HABITACION_PK PRIMARY KEY (NUM_SERVICIO_HABITACION, ID_CLIENTE, ID_HABITACION, NUM_DETALLE_SERVICIO)
);
